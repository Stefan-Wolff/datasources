PREFIX cordis:	<http://cordis.europa.eu/>
PREFIX rdfs:	<http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf:	<http://xmlns.com/foaf/0.1/>
PREFIX obo:		<http://purl.obolibrary.org/obo/>
PREFIX vivo: <http://vivoweb.org/ontology/core#>


CONSTRUCT {

    ?department a foaf:AcademicDepartment .
    
    ?department rdfs:label ?org_dep_name .
    
    ?department obo:BFO_0000050 ?org .
    # department is "PartOf" organization

    ?department vivo:identifier ?departmentId
    
} WHERE {
	
    { ?org cordis:departmentName ?org_dep_name . }
    UNION
    { ?org cordis:otherDepartmentName ?org_dep_name . }
	
    FILTER ( ?org_dep_name != "N/A" && "-" )

    ?org vivo:identifier ?orgId 

    BIND(IRI(CONCAT(STR(?org), "-department-", REPLACE(?org_dep_name, "\\W", ""))) AS ?department)
    BIND(CONCAT(STR(?orgId), "-department-", REPLACE(?org_dep_name, "\\W", "")) AS ?departmentId)
}
